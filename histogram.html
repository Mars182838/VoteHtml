<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>大众评审投票</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <script src='http://www.ichartjs.com/ichart.latest.min.js'></script>
    <script src="js/jquery-1.9.1.min.js"></script>

    <script type='text/javascript'>

        $(function(){
            var commonData = new Array();
            var namelist = new Array;

            function getData(){
                $.ajax({
                    url:'http://112.74.51.149:8002/yyhsy/xsdpzs',
                    type:'GET', //GET
                    timeout:2000,    //超时时间
                    dataType:'json',    //返回的数据格式：json/xml/html/script/jsonp/text
                    success:function(data,textStatus,jqXHR){
                        namelist = data;
                        console.log(namelist);
                    },
                    error:function(xhr,textStatus){
                        console.log('错误')
                        console.log(xhr)
                        console.log(textStatus)
                    }
                });
            }

        function hello(){

                getData();
                commonData = namelist;
                var chart = iChart.create({
                    render:"ichart-render",
                    width:1000,
                    height:800,
                    background_color:"#fefefe",
                    gradient:false,
                    color_factor:0.2,
                    border:{
                        color:"BCBCBC",
                        width:1
                    },
                    align:"center",
                    offsetx:0,
                    offsety:0,
                    sub_option:{
                        border:{
                            color:"#BCBCBC",
                            width:1
                        },
                        label:{
                            fontweight:500,
                            fontsize:11,
                            color:"#4572a7",
                            sign:"square",
                            sign_size:12,
                            border:{
                                color:"#BCBCBC",
                                width:1
                            },
                            background_color:"#fefefe"
                        }
                    },
                    shadow:true,
                    shadow_color:"#666666",
                    shadow_blur:2,
                    showpercent:false,
                    column_width:"70%",
                    bar_height:"70%",
                    radius:"90%",
                    title:{
                        text:"大众评审投票",
                        color:"#111111",
                        fontsize:20,
                        font:"微软雅黑",
                        textAlign:"center",
                        height:30,
                        offsetx:0,
                        offsety:0
                    },
                    subtitle:{
                        text:"歌手得票",
                        color:"#111111",
                        fontsize:16,
                        font:"微软雅黑",
                        textAlign:"center",
                        height:20,
                        offsetx:0,
                        offsety:0
                    },
                    footnote:{
                        text:"",
                        color:"#111111",
                        fontsize:12,
                        font:"微软雅黑",
                        textAlign:"right",
                        height:20,
                        offsetx:0,
                        offsety:0
                    },
                    legend:{
                        enable:false,
                        background_color:"#fefefe",
                        color:"#333333",
                        fontsize:12,
                        border:{
                            color:"#BCBCBC",
                            width:1
                        },
                        column:1,
                        align:"right",
                        valign:"center",
                        offsetx:0,
                        offsety:0
                    },
                    coordinate:{
                        width:"80%",
                        height:"84%",
                        background_color:"#ffffff",
                        axis:{
                            color:"#a5acb8",
                            width:[1,"",1,""]
                        },
                        grid_color:"#d9d9d9",
                        label:{
                            fontweight:500,
                            color:"#666666",
                            fontsize:11
                        }
                    },
                    label:{
                        fontweight:500,
                        color:"#666666",
                        fontsize:11
                    },
                    type:"column2d",
                    data:commonData
                });
                chart.draw();
            }

        var t1 = window.setInterval(hello,1000);

        });
        //重复执行某个方法
    </script>
</head>
<body style='background-color:#37D6F8;'>
<div id='ichart-render'></div>
</body>
</html>